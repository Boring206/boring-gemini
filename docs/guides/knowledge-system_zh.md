# çŸ¥è­˜ç³»çµ± - Brainã€RAG èˆ‡ Patterns

> Boring çš„æ™ºèƒ½è¨˜æ†¶ç³»çµ±ï¼Œè·¨å°ˆæ¡ˆå­¸ç¿’èˆ‡è¨˜æ†¶ã€‚

---

## ğŸ§  æ¶æ§‹æ¦‚è¦½

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    çŸ¥è­˜ç³»çµ±                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                         â”‚
â”‚  ~/.boring_brain/          ï¼ˆå…¨åŸŸ - æ‰€æœ‰å°ˆæ¡ˆï¼‰           â”‚
â”‚  â”œâ”€â”€ patterns/             å­¸ç¿’çš„éŒ¯èª¤è§£æ±ºæ–¹æ¡ˆ            â”‚
â”‚  â”œâ”€â”€ rubrics/              è©•ä¼°æ¨™æº–                     â”‚
â”‚  â”œâ”€â”€ shadow_config.json    å½±å­æ¨¡å¼è¨­å®š                 â”‚
â”‚  â””â”€â”€ quality_history.json  åˆ†æ•¸è¶¨å‹¢                     â”‚
â”‚                                                         â”‚
â”‚  .boring_memory/           ï¼ˆå°ˆæ¡ˆå°ˆå±¬ï¼‰                  â”‚
â”‚  â”œâ”€â”€ context.json          æœƒè©±ä¸Šä¸‹æ–‡                   â”‚
â”‚  â”œâ”€â”€ decisions.json        æ¶æ§‹æ±ºç­–                     â”‚
â”‚  â””â”€â”€ learnings.json        å°ˆæ¡ˆå­¸ç¿’                     â”‚
â”‚                                                         â”‚
â”‚  .boring_cache/            ï¼ˆæš«æ™‚æ€§ - å¿«å–ï¼‰             â”‚
â”‚  â”œâ”€â”€ verification.json     å¿«å–çš„é©—è­‰çµæœ               â”‚
â”‚  â””â”€â”€ rag_index/            å‘é‡åµŒå…¥                     â”‚
â”‚                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“ ç›®éŒ„åƒè€ƒ

| ç›®éŒ„ | ç¯„åœ | ç”¨é€” | é·ç§»æ–¹å¼ |
|------|------|------|----------|
| `~/.boring_brain/` | å…¨åŸŸ | è·¨å°ˆæ¡ˆçŸ¥è­˜ | è¤‡è£½åˆ°æ–°æ©Ÿå™¨ |
| `.boring_memory/` | å°ˆæ¡ˆ | å°ˆæ¡ˆå°ˆå±¬ä¸Šä¸‹æ–‡ | æäº¤åˆ° repo |
| `.boring_cache/` | æš«æ™‚ | çŸ­æš«å¿«å– | è‡ªå‹•é‡å»º |

---

## ğŸ§  .boring_brainï¼ˆå…¨åŸŸçŸ¥è­˜ï¼‰

### ä½ç½®
- **Linux/macOS**ï¼š`~/.boring_brain/`
- **Windows**ï¼š`C:\Users\<username>\.boring_brain\`

### å…§å®¹

#### patterns/ - å­¸ç¿’çš„æ¨¡å¼
```json
{
  "error_patterns": [
    {
      "error": "ModuleNotFoundError: No module named 'foo'",
      "solution": "pip install foo",
      "confidence": 0.95,
      "occurrences": 15
    }
  ]
}
```

AI å¾ä½ çš„éŒ¯èª¤-è§£æ±ºæ–¹æ¡ˆé…å°ä¸­å­¸ç¿’ï¼Œä¸¦è‡ªå‹•æ‡‰ç”¨ã€‚

#### rubrics/ - è©•ä¼°æ¨™æº–
```markdown
# production-ready.md
- [ ] æ‰€æœ‰æ¸¬è©¦é€šéï¼ˆ100%ï¼‰
- [ ] ç„¡å®‰å…¨æ¼æ´
- [ ] æ–‡æª”å®Œæ•´
- [ ] æ•ˆèƒ½å·²åŸºæº–æ¸¬è©¦
```

ç”¨æ–¼ `boring_evaluate` çš„è‡ªè¨‚æ¨™æº–ã€‚

#### shadow_config.json - å®‰å…¨è¨­å®š
```json
{
  "level": "STRICT",
  "auto_approve_patterns": ["*.md", "docs/*"],
  "always_block_patterns": ["*.env", "secrets/*"]
}
```

è·¨æœƒè©±æŒä¹…ä¿å­˜ã€‚

### é·ç§»

```bash
# å‚™ä»½
cp -r ~/.boring_brain ~/boring_brain_backup

# åœ¨æ–°æ©Ÿå™¨ä¸Šé‚„åŸ
cp -r ~/boring_brain_backup ~/.boring_brain
```

---

## ğŸ“‚ .boring_memoryï¼ˆå°ˆæ¡ˆçŸ¥è­˜ï¼‰

### ä½ç½®
- åœ¨ä½ çš„å°ˆæ¡ˆæ ¹ç›®éŒ„ï¼š`.boring_memory/`

### å…§å®¹

#### context.json - æœƒè©±ä¸Šä¸‹æ–‡
```json
{
  "architecture": "microservices",
  "tech_stack": ["FastAPI", "PostgreSQL", "Redis"],
  "current_focus": "authentication module"
}
```

#### decisions.json - æ¶æ§‹æ±ºç­–
```json
{
  "decisions": [
    {
      "date": "2024-01-15",
      "topic": "è³‡æ–™åº«é¸æ“‡",
      "decision": "PostgreSQL è€Œé MySQL",
      "rationale": "æ›´å¥½çš„ JSON æ”¯æ´ï¼Œpg_vector ç”¨æ–¼ RAG"
    }
  ]
}
```

#### learnings.json - å°ˆæ¡ˆå­¸ç¿’
```json
{
  "error_solutions": [
    {
      "error": "ç”Ÿç”¢ç’°å¢ƒé€£æ¥è¶…æ™‚",
      "solution": "å¢åŠ è³‡æ–™åº«é…ç½®ä¸­çš„ pool_size"
    }
  ]
}
```

### æœ€ä½³å¯¦è¸

```bash
# æäº¤åˆ° repo èˆ‡åœ˜éšŠåˆ†äº«
git add .boring_memory/
git commit -m "docs: å°ˆæ¡ˆä¸Šä¸‹æ–‡å’Œæ±ºç­–"
```

---

## ğŸ” RAG ç³»çµ±

### é‹ä½œåŸç†

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   ä½ çš„ä»£ç¢¼   â”‚ â”€â”€â–¶ â”‚    ç´¢å¼•å™¨    â”‚ â”€â”€â–¶ â”‚  å‘é‡è³‡æ–™åº«  â”‚
â”‚  (src/*.py)  â”‚     â”‚  (åµŒå…¥å‘é‡)  â”‚     â”‚  (ChromaDB)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                 â”‚
                                                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     çµæœ     â”‚ â—€â”€â”€ â”‚    æ’åºå™¨    â”‚ â—€â”€â”€ â”‚  æ··åˆæœå°‹    â”‚
â”‚  (top_k=10)  â”‚     â”‚  (é‡æ–°æ’åº)  â”‚     â”‚ å‘é‡+BM25    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### åŠŸèƒ½

| åŠŸèƒ½ | èªªæ˜ |
|------|------|
| **æ··åˆæœå°‹** | å‘é‡ï¼ˆèªæ„ï¼‰+ BM25ï¼ˆé—œéµå­—ï¼‰|
| **ä¾è³´æ“´å±•** | é€é import åœ–åŒ…å«ç›¸é—œæª”æ¡ˆ |
| **å¢é‡ç´¢å¼•** | åªé‡æ–°ç´¢å¼•è®Šæ›´çš„æª”æ¡ˆ |
| **è‡ªå‹•æ›´æ–°** | RAGWatcher åµæ¸¬æª”æ¡ˆè®Šæ›´ï¼ˆV10.18.3+ï¼‰|

### å‘½ä»¤

```python
# å»ºç«‹ç´¢å¼•
boring_rag_index(project_path=".", force=False)

# æœå°‹
boring_rag_search(
    query="authentication middleware",
    top_k=10,
    expand_deps=True
)

# é‡æ–°è¼‰å…¥
boring_rag_reload(project_path=".")
```

### å„²å­˜

- **ç´¢å¼•ä½ç½®**ï¼š`.boring_cache/rag_index/`
- **å¤§å°**ï¼šæ¯ 1000 å€‹æª”æ¡ˆç´„ 1MB
- **é‡å»º**ï¼šå¦‚æœç¼ºå¤±å‰‡è‡ªå‹•å»ºç«‹

---

## ğŸ“š Patterns èˆ‡ AutoLearner

### Patterns å¦‚ä½•å­¸ç¿’

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  AI å›æ‡‰     â”‚ â”€â”€â–¶ â”‚ AutoLearner  â”‚ â”€â”€â–¶ â”‚  Pattern DB  â”‚
â”‚ "é€é X ä¿®å¾©" â”‚     â”‚   (æå–)     â”‚     â”‚(.boring_brain)â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â–¼
                    ä¸‹æ¬¡ï¼šè‡ªå‹•æ‡‰ç”¨ï¼
```

### Pattern é¡å‹

| é¡å‹ | ç¯„ä¾‹ |
|------|------|
| **éŒ¯èª¤è§£æ±ºæ–¹æ¡ˆ** | `ImportError` â†’ `pip install X` |
| **ä»£ç¢¼æ¨¡å¼** | Auth middleware çµæ§‹ |
| **é‡æ§‹** | æå–å‡½æ•¸æ¨¡å¼ |

### æ‰‹å‹•å­¸ç¿’

```python
# å¾æœƒè©±è§¸ç™¼å­¸ç¿’
boring_learn(
    project_path=".",
    topics=["error-handling", "testing", "patterns"]
)
```

---

## ğŸšš é·ç§»æŒ‡å—

### åˆ°æ–°æ©Ÿå™¨

```bash
# 1. è¤‡è£½å…¨åŸŸçŸ¥è­˜
scp -r ~/.boring_brain user@newmachine:~/

# 2. Clone å°ˆæ¡ˆï¼ˆåŒ…å« .boring_memoryï¼‰
git clone your-repo

# 3. é‡å»ºå¿«å–ï¼ˆé¦–æ¬¡ä½¿ç”¨æ™‚è‡ªå‹•ï¼‰
boring rag index
```

### çµ¦åœ˜éšŠæˆå“¡

```bash
# åœ¨ .gitignore ä¸­
.boring_cache/          # ä¸è¦æäº¤å¿«å–

# æäº¤å°ˆæ¡ˆçŸ¥è­˜
git add .boring_memory/
git add .boring.toml    # å°ˆæ¡ˆé…ç½®
```

### ç’°å¢ƒè®Šæ•¸

```bash
# è‡ªè¨‚ brain ä½ç½®
export BORING_BRAIN_PATH="/path/to/shared/brain"

# è‡ªè¨‚å¿«å–ä½ç½®
export BORING_CACHE_PATH="/tmp/boring_cache"
```

---

## å¦è«‹åƒé–±

- [MCP å·¥å…· - RAG](./mcp-tools_zh.md#6-rag-è¨˜æ†¶-boring_rag_search)
- [å°ˆæ¥­æŠ€å·§ - çŸ¥è­˜](./pro-tips_zh.md#æŠ€å·§-11è·¨å°ˆæ¡ˆçŸ¥è­˜åˆ†äº«)
- [Cookbook - é£Ÿè­œ 9](./cookbook_zh.md#é£Ÿè­œ-9rag-çŸ¥è­˜åº«)
