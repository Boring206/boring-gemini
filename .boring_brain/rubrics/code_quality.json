{
    "name": "Code Quality Rubric",
    "version": "1.0.0",
    "description": "Polyglot code quality evaluation rubric for AI-generated code",
    "criteria": [
        {
            "name": "Readability",
            "weight": 0.20,
            "description": "How easy the code is to understand and navigate",
            "levels": {
                "1": {
                    "label": "Poor",
                    "characteristics": [
                        "No meaningful variable or function names",
                        "No comments or documentation",
                        "Deeply nested or convoluted logic",
                        "Inconsistent formatting"
                    ]
                },
                "2": {
                    "label": "Below Average",
                    "characteristics": [
                        "Some meaningful names but inconsistent",
                        "Minimal comments",
                        "Complex logic without explanation"
                    ]
                },
                "3": {
                    "label": "Adequate",
                    "characteristics": [
                        "Most variables have meaningful names",
                        "Basic comments for complex sections",
                        "Logic is followable but could be cleaner"
                    ]
                },
                "4": {
                    "label": "Good",
                    "characteristics": [
                        "Descriptive names following conventions",
                        "Clear comments explaining why, not what",
                        "Well-structured logic"
                    ]
                },
                "5": {
                    "label": "Excellent",
                    "characteristics": [
                        "All names are descriptive and consistent with language conventions",
                        "Comprehensive documentation (docstrings, JSDoc, etc.)",
                        "Clean, self-documenting code"
                    ]
                }
            }
        },
        {
            "name": "Correctness",
            "weight": 0.25,
            "description": "Whether the code correctly implements the required functionality",
            "levels": {
                "1": {
                    "label": "Broken",
                    "characteristics": [
                        "Does not compile/run",
                        "Logic errors prevent basic functionality",
                        "Missing critical requirements"
                    ]
                },
                "2": {
                    "label": "Partial",
                    "characteristics": [
                        "Compiles but has runtime errors",
                        "Some requirements met, others missing",
                        "Edge cases cause failures"
                    ]
                },
                "3": {
                    "label": "Functional",
                    "characteristics": [
                        "Core functionality works",
                        "Most requirements met",
                        "Some edge cases may fail"
                    ]
                },
                "4": {
                    "label": "Solid",
                    "characteristics": [
                        "All requirements met",
                        "Handles most edge cases",
                        "Minor issues only"
                    ]
                },
                "5": {
                    "label": "Robust",
                    "characteristics": [
                        "All requirements fully implemented",
                        "Comprehensive edge case handling",
                        "No known bugs"
                    ]
                }
            }
        },
        {
            "name": "Security",
            "weight": 0.20,
            "description": "Presence of security best practices and absence of vulnerabilities",
            "levels": {
                "1": {
                    "label": "Vulnerable",
                    "characteristics": [
                        "Obvious vulnerabilities (SQL injection, XSS, etc.)",
                        "Secrets hardcoded in code",
                        "No input validation"
                    ]
                },
                "2": {
                    "label": "Risky",
                    "characteristics": [
                        "Some security issues present",
                        "Incomplete input validation",
                        "Potential for exploitation"
                    ]
                },
                "3": {
                    "label": "Basic",
                    "characteristics": [
                        "Basic input validation",
                        "No obvious vulnerabilities",
                        "Secrets not in code (but may not be properly managed)"
                    ]
                },
                "4": {
                    "label": "Secure",
                    "characteristics": [
                        "Comprehensive input validation",
                        "Follows OWASP guidelines",
                        "Proper secret management"
                    ]
                },
                "5": {
                    "label": "Hardened",
                    "characteristics": [
                        "Defence in depth approach",
                        "Security-first design",
                        "Passes security scan tools (Bandit, npm audit, etc.)"
                    ]
                }
            }
        },
        {
            "name": "Maintainability",
            "weight": 0.20,
            "description": "How easy it is to modify, extend, or debug the code",
            "levels": {
                "1": {
                    "label": "Unmaintainable",
                    "characteristics": [
                        "God classes/functions (>500 lines)",
                        "Tight coupling everywhere",
                        "No separation of concerns"
                    ]
                },
                "2": {
                    "label": "Difficult",
                    "characteristics": [
                        "Large functions (>100 lines)",
                        "Significant coupling",
                        "Mixed responsibilities"
                    ]
                },
                "3": {
                    "label": "Manageable",
                    "characteristics": [
                        "Reasonable function sizes",
                        "Some coupling but manageable",
                        "Basic separation of concerns"
                    ]
                },
                "4": {
                    "label": "Clean",
                    "characteristics": [
                        "Small, focused functions",
                        "Loose coupling",
                        "Clear module boundaries"
                    ]
                },
                "5": {
                    "label": "Exemplary",
                    "characteristics": [
                        "SOLID principles followed",
                        "Dependency injection where appropriate",
                        "Easy to extend and modify"
                    ]
                }
            }
        },
        {
            "name": "Testability",
            "weight": 0.15,
            "description": "How easy it is to write tests for the code",
            "levels": {
                "1": {
                    "label": "Untestable",
                    "characteristics": [
                        "No tests possible without major refactoring",
                        "Global state everywhere",
                        "External dependencies tightly coupled"
                    ]
                },
                "2": {
                    "label": "Hard to Test",
                    "characteristics": [
                        "Some testable units",
                        "Many mocking requirements",
                        "Complex setup needed"
                    ]
                },
                "3": {
                    "label": "Testable",
                    "characteristics": [
                        "Core logic testable",
                        "Reasonable mocking requirements",
                        "Some tests included"
                    ]
                },
                "4": {
                    "label": "Well Tested",
                    "characteristics": [
                        "High test coverage (>60%)",
                        "Easy to mock dependencies",
                        "Clear test patterns"
                    ]
                },
                "5": {
                    "label": "TDD Quality",
                    "characteristics": [
                        "Excellent coverage (>80%)",
                        "Pure functions where possible",
                        "Tests serve as documentation"
                    ]
                }
            }
        }
    ],
    "pass_threshold": 3.5,
    "edge_cases": [
        {
            "situation": "Code uses domain-specific abbreviations",
            "guidance": "Score based on readability for domain experts, not general audience"
        },
        {
            "situation": "Code is auto-generated (protobuf, OpenAPI, etc.)",
            "guidance": "Score generated code leniently, focus on hand-written code"
        },
        {
            "situation": "Legacy code being refactored",
            "guidance": "Compare to original state, not ideal state"
        },
        {
            "situation": "Performance-critical code sacrifices readability",
            "guidance": "Accept trade-off if documented and necessary"
        }
    ],
    "language_specific_notes": {
        "python": "Check PEP 8 compliance, type hints, docstrings",
        "javascript": "Check ESLint rules, JSDoc, async/await patterns",
        "typescript": "Check strict mode, proper typing, no any",
        "go": "Check go fmt, error handling, idiomatic patterns",
        "rust": "Check clippy warnings, ownership patterns, unsafe usage",
        "java": "Check PMD/Checkstyle rules, exception handling"
    }
}